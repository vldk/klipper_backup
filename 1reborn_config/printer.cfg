[include steppers.cfg]
[include mainsail.cfg]
# [include adxl.cfg]
[include playtones.cfg]
[include leds.cfg]
[include macroses.cfg]
[include bltouch.cfg]
[include bedmesh.cfg]

[virtual_sdcard]
path: ~/1reborn_data/gcodes
on_error_gcode:
  CANCEL_PRINT

[pause_resume]

[display_status]

[exclude_object]


[mcu]
# serial: /dev/serial/by-path/platform-5200000.ehci1-controller-usb-0:1.2:1.0
serial: /dev/ttyS3
restart_method: command

[mcu host]
serial: /tmp/klipper_host_mcu

[printer]
kinematics: corexy
max_velocity: 500 #максимальные ускорения
square_corner_velocity: 5.0
max_accel: 6000
max_accel_to_decel: 3000
max_z_velocity: 25
max_z_accel: 100

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
# min_temp: -80
# max_temp: 80

[temperature_sensor orange_pi]
sensor_type: temperature_host
min_temp: 0
max_temp: 90

[input_shaper]
shaper_freq_x: 44.9  # frequency for the X mark of the test model
shaper_freq_y: 48.3  # frequency for the Y mark of the test model
shaper_type: mzv


[heater_bed]
heater_pin: PA0
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PC0 # Смотри пункт 1 в заголовке
min_temp: 0
max_temp: 130
#control: pid
#pid_Kp:65.232 
#pid_Ki:1.330 
#pid_Kd:799.905

#####################################################################
#  Heater Fan + Mother Board Fan
#####################################################################
[heater_fan heater_fan]
pin: PC14 
max_power: 1.0
shutdown_speed: 0.0
heater: extruder
heater_temp: 60.0 ; Shutdown FAN at 30C
fan_speed: 1.0

#####################################################################
#  Fan 2x4010 Model FAN
#####################################################################
[fan]
pin: PB1
max_power: 1.0
shutdown_speed: 0
cycle_time: 0.010
hardware_pwm: False
off_below: 0.20
kick_start_time: 0.4


[filament_switch_sensor filament_sensor]
switch_pin: PE6
pause_on_runout: True
#runout_gcode:
#insert_gcode:
#event_delay: 3.0
#pause_delay: 0.5


[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PC5,  EXP1_3=PD13,   EXP1_5=PE14, EXP1_7=PD11,  EXP1_9=<GND>,
    EXP1_2=PE13, EXP1_4=PC6,    EXP1_6=PE15, EXP1_8=PD10,  EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=PA6, EXP2_3=PE8,  EXP2_5=PE11, EXP2_7=PE12,  EXP2_9=<GND>,
    EXP2_2=PA5, EXP2_4=PE10, EXP2_6=PA7,  EXP2_8=<RST>, EXP2_10=<3.3V>

[idle_timeout]
gcode:
   TURN_OFF_HEATERS
   M84             ; disable steppers
timeout: 3600      ;60 min

# [stepper_z]
# position_endstop = 0.040
#
# [bltouch]
# z_offset = 0.619

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 61.908
#*# pid_ki = 2.074
#*# pid_kd = 461.990
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 30.615
#*# pid_ki = 1.744
#*# pid_kd = 134.324
#*#
#*# [bltouch]
#*# z_offset = 4.920
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.111928, 0.081511, 0.060678, 0.066511, 0.048178, 0.075678, 0.141928
#*# 	0.013178, 0.033178, 0.005678, -0.034739, -0.054739, -0.050989, 0.004011
#*# 	-0.037239, -0.053072, -0.056822, -0.100572, -0.105572, -0.086405, -0.051405
#*# 	0.039428, -0.003905, -0.033905, -0.041822, -0.015989, -0.034739, -0.019322
#*# 	0.027345, 0.039845, -0.013489, -0.040989, -0.028905, 0.010261, 0.009428
#*# 	0.049428, 0.053178, 0.072761, 0.074428, 0.082761, 0.078178, 0.105678
#*# 	0.157345, 0.142345, 0.144011, 0.141095, 0.146928, 0.172345, 0.229011
#*# tension = 0.2
#*# min_x = 50.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 2
#*# min_y = 25.0
#*# x_count = 7
#*# max_y = 310.0
#*# mesh_x_pps = 2
#*# max_x = 320.0
#*#
#*# [bed_mesh stock2]
#*# version = 1
#*# points =
#*# 	0.211338, 0.197588, 0.195921, 0.158004, 0.131754, 0.158421, 0.200088
#*# 	0.150088, 0.119671, 0.099254, 0.081754, 0.033421, 0.060088, 0.092588
#*# 	0.090088, 0.065088, 0.035921, -0.001579, -0.008662, 0.000088, 0.062588
#*# 	0.105504, 0.089254, 0.065504, 0.034254, 0.003838, 0.002171, 0.076754
#*# 	0.067588, 0.049671, 0.031338, 0.000088, -0.016162, -0.005329, 0.067588
#*# 	0.079671, 0.079671, 0.080921, 0.060504, 0.047588, 0.065504, 0.123838
#*# 	0.110504, 0.115088, 0.127588, 0.119671, 0.109254, 0.130504, 0.197588
#*# tension = 0.2
#*# min_x = 50.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 2
#*# min_y = 25.0
#*# x_count = 7
#*# max_y = 310.0
#*# mesh_x_pps = 2
#*# max_x = 320.0
#*#
#*# [bed_mesh stock_old]
#*# version = 1
#*# points =
#*# 	0.127917, 0.124167, 0.142500, 0.134167, 0.081667, 0.105833, 0.122083
#*# 	0.041250, 0.085417, 0.080833, 0.000000, -0.021667, 0.000000, 0.052500
#*# 	0.019583, 0.021667, -0.015833, -0.047083, -0.047083, -0.041667, 0.021250
#*# 	0.145833, 0.044167, 0.019167, -0.004583, -0.031667, 0.028750, 0.063750
#*# 	0.095833, 0.054167, 0.046250, 0.010417, 0.032083, 0.072083, 0.105000
#*# 	0.149167, 0.162083, 0.177500, 0.159167, 0.166667, 0.156667, 0.215833
#*# 	0.206667, 0.247500, 0.234583, 0.235833, 0.232500, 0.277500, 0.328750
#*# tension = 0.2
#*# mesh_x_pps = 2
#*# algo = bicubic
#*# min_x = 50.0
#*# min_y = 25.0
#*# y_count = 7
#*# mesh_y_pps = 2
#*# x_count = 7
#*# max_x = 320.0
#*# max_y = 310.0
#*#
#*# [bed_mesh stock]
#*# version = 1
#*# points =
#*# 	0.103662, 0.095329, 0.115745, 0.098245, 0.060329, 0.082829, 0.131579
#*# 	0.029495, 0.026579, 0.016579, -0.003838, -0.025088, -0.010505, 0.053245
#*# 	0.000329, -0.013421, 0.015329, -0.023421, -0.044671, -0.023005, 0.036579
#*# 	0.051579, 0.039495, 0.031162, 0.003245, -0.036755, -0.014255, 0.043245
#*# 	0.040329, 0.026579, 0.014495, -0.003005, -0.008421, -0.002588, 0.042829
#*# 	0.066162, 0.076995, 0.079912, 0.099912, 0.058245, 0.079079, 0.150329
#*# 	0.149495, 0.166162, 0.181579, 0.169079, 0.172829, 0.191995, 0.261162
#*# tension = 0.2
#*# min_x = 50.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 2
#*# min_y = 25.0
#*# x_count = 7
#*# max_y = 310.0
#*# mesh_x_pps = 2
#*# max_x = 320.0
#*#
#*# [bed_mesh glass]
#*# version = 1
#*# points =
#*# 	0.221172, 0.192005, 0.222838, 0.254505, 0.189922, 0.241588, 0.252005
#*# 	0.164922, 0.106172, 0.080755, 0.107838, 0.064505, 0.079088, 0.127005
#*# 	0.100338, 0.038255, 0.001588, -0.002578, -0.030912, 0.002422, 0.053255
#*# 	0.118672, 0.057005, 0.010338, 0.019505, -0.035078, 0.005338, 0.050755
#*# 	0.099505, 0.039505, 0.003255, -0.002995, -0.042995, 0.012422, 0.062005
#*# 	0.141588, 0.121172, 0.092838, 0.078672, 0.028672, 0.068255, 0.130755
#*# 	0.119088, 0.093672, 0.091588, 0.071588, 0.048672, 0.099088, 0.150755
#*# tension = 0.2
#*# min_x = 40.7
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 2
#*# min_y = 6.8
#*# x_count = 7
#*# max_y = 299.78
#*# mesh_x_pps = 2
#*# max_x = 310.7
